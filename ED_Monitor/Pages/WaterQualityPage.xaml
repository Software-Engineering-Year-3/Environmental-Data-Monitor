<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:ED_Monitor.ViewModels"
    x:Class="ED_Monitor.Pages.WaterQualityPage"
    Title="Water Quality">

  <!-- Hook up the ViewModel for data binding -->
  <ContentPage.BindingContext>
    <vm:WaterQualityViewModel />
  </ContentPage.BindingContext>


 <!-- Pull-to-refresh wrapper -->
  <RefreshView
      Command="{Binding LoadAsyncCommand}"
      IsRefreshing="{Binding IsBusy}"
      VerticalOptions="FillAndExpand">


  <!-- Show each water-quality record in a list -->
    <CollectionView ItemsSource="{Binding Items}">
      <CollectionView.ItemTemplate>
        <DataTemplate>
          <Frame BorderColor="Gray" Padding="10" CornerRadius="5" Margin="5">
            <VerticalStackLayout Spacing="4">

             <!-- Display the measurement date -->
              <Label Text="{Binding Date}" FontAttributes="Bold" />
              <!-- Site identifier -->
              <Label Text="{Binding SiteName}" />
            
            <!-- status labels -->
              <Label Text="{Binding NitrateStatus}" />
              <Label Text="{Binding NitriteStatus}" />
              <Label Text="{Binding PhosphateStatus}" />
              <Label Text="{Binding ECStatus}" />
            </VerticalStackLayout>
          </Frame>
        </DataTemplate>
      </CollectionView.ItemTemplate>
    </CollectionView>
  </RefreshView>
</ContentPage>
