<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:vm="clr-namespace:ED_Monitor.ViewModels"
    x:Class="ED_Monitor.Pages.WeatherPage"
    Title="Weather">

<!-- Bind to the WeatherViewModel for data and commands -->
  <ContentPage.BindingContext>
    <vm:WeatherViewModel />
  </ContentPage.BindingContext>

  <!-- Allows pull-to-refresh using the ViewModel's LoadAsyncCommand -->

  <RefreshView
      Command="{Binding LoadAsyncCommand}"
      IsRefreshing="{Binding IsBusy}"
      VerticalOptions="FillAndExpand">


<!-- Display each weather record in a scrollable list -->
    <CollectionView ItemsSource="{Binding Items}">
      <CollectionView.ItemTemplate>
        <DataTemplate>
          <Frame BorderColor="Gray" Padding="10" CornerRadius="5" Margin="5">
            <VerticalStackLayout Spacing="5">
             <!-- Show the measurement date -->
              <Label Text="{Binding Date}" FontAttributes="Bold" />
            <!-- Temperature description -->
              <Label Text="{Binding TempStatus}" />
            <!-- Humidity description -->
              <Label Text="{Binding HumidityStatus}" />
            <!-- Wind description (e.g., "Calm" or "Windy") -->
              <Label Text="{Binding WindStatus}" />
            </VerticalStackLayout>
          </Frame>
        </DataTemplate>
      </CollectionView.ItemTemplate>
    </CollectionView>
  </RefreshView>
</ContentPage>
